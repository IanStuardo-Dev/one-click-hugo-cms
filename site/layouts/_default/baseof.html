<!doctype html>
<html lang="{{ $.Site.Language.Lang }}">
  <link rel="stylesheet" href="https://improvebot.krino.ai/e4d798d154509684de5b69af7cb4e31396263913e6b1b0f6a7e4f218007006ac">
  {{ partial "head" . }}
  <body class="sans-serif">

    {{ block "header" . }}{{ partial "nav" . }}{{end}}

    {{ block "main" . }}{{ end }}

    {{ block "footer" . }}{{ partial "footer" . }}{{end}}

    {{ $script := .Site.Data.webpack.main }}
    {{ with $script.js }}
    <div id="improve-bot">
    </div>
      <script src="{{ relURL . }}"></script>
    {{ end }}
    <script>
      const DChCJiXPDX="https://tfn.krino.ai/",EUEfixfCco="https://static-for-flask-krino.s3.amazonaws.com/";let jHBpBbxbzB=0;const improvebotSonido=new Audio("https://static-for-flask-krino.s3.amazonaws.com/archivos/popup.mp3"),yKRsYXgiwS=document.getElementById("improve-bot");let KRuQZYzyGZ,vktrUabOUS,improvebot_ulcards,improvebot_delivery_check=0,improvebot_iniciado=!1,improvebot_cantidadBotones=0;const improvebotHistorial=[],divInicial=document.createElement("div");let socket,improvebot_tipoespecialFAQ,improvebot_NEXT,improvebot_textoinicio="",improveBotCallToActionFlag=!0,improveBotNameFlag=!1,improvebotHistorialFlag=!0,improvebotLiveChatFlag=!1,improvebotLiveChatFlagInitSocket=!1;async function activarCDNSockerIO(){await import("https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js")}async function activarCDNCarousel(){await import("https://cdn.jsdelivr.net/npm/@splidejs/splide@latest/dist/js/splide.min.js");var e=document.createElement("link");e.href="https://cdn.jsdelivr.net/npm/@splidejs/splide@latest/dist/css/splide.min.css",e.type="text/css",e.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(e)}async function improvebot_reemplazarNegritas(e){return new Promise(t=>{let o=0,n=0,i="";for(let t in e)n++,"*"===e[t]?1===++o?(console.log("Poniendo <b>"),i+="<b>"):2===o&&(o=0,i+="</b>"):n-1==e.length?n=0:i+=e[t];t(i)})}function improvebot_cambiarEstadoBanderaLiveChat(e){1==(improvebotLiveChatFlag=e)&&layRMXrLNe()}async function improvebotInit(){await TMWimaQXDx();null==gTBrmIzuvr&&(gTBrmIzuvr=await improveBotGetBot(31)),improvebot_textoinicio=185==gTBrmIzuvr.id?"¬°Hola! Soy Ema, tu mesera virtual":193==gTBrmIzuvr.id?"¬°Hola! üëã Soy Hans. ¬øQuieres participar en un concurso?":" ¬°Hola! üëã Soy "+gTBrmIzuvr.name_bot+". ¬øEn qu√© puedo ayudarte?",improvebotElementsInit(),setTimeout(function(){divInicial.classList.add("RTShwqPmbn")},1e3)}let improvebot_buttonsElements=[];async function layRMXrLNe(){if(improvebot_cantidadBotones=0,0==improvebotLiveChatFlag){console.log({bot:gTBrmIzuvr.id,chat:parseInt(jHBpBbxbzB),url:window.location.origin});let t={bot:gTBrmIzuvr.id,chat:parseInt(jHBpBbxbzB),url:window.location.origin};console.log(t);let o=await fetch(DChCJiXPDX+"get_custom_chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await o.json();if(console.log(n),console.log(Object.keys(n).length),console.log(n.elementos),Object.keys(n).length>0){var e=0;improvebot_buttonsElements=[],document.getElementById("improve_buttons").innerHTML="";for(let t in n.elementos)if(Object.keys(n.elementos[t]).length>0){if("btnFaq"==t){improvebot_cantidadBotones++,document.getElementById("improve_buttons").innerHTML="",console.log("Entre a btnFaq"),console.log(n.elementos[t]),ozRadApFvB(n.elementos[t],t)}else{if(document.getElementById("improvebot_animaciontemporal"));else{let e=improvebotChatBubble();vktrUabOUS.append(e)}setTimeout(function(){if(document.getElementById("improvebot_animaciontemporal"))ozRadApFvB(n.elementos[t],t),improveBotLimpiarBurbuja();else{let e=improvebotChatBubble();vktrUabOUS.append(e),setTimeout(function(){ozRadApFvB(n.elementos[t],t),improveBotLimpiarBurbuja()},500)}},1e3+e),e+=1e3}improveBotActivateInput()}}}else activarCDNSockerIO().then(function(e){improvebotLiveChatFlagInitSocketFunction()})}let improvebot_FAQActual=0;async function ozRadApFvB(e,t){0==improvebot_delivery_check&&(185==gTBrmIzuvr.id&&improvebot_deliveryGourmetAPI(),improvebot_delivery_check+=1);if(console.log(e,t),console.log(t),Object.keys(e).length>0)switch(t){case"label":console.log("LABEL");const I=t.sub_faq>0?t.sub_faq:t.faq;improvebot_FAQActual=I;for(let t in e){let o=await improvebot_reemplazarNegritas(e[t].contenido);null==e[t].contenido||""==e[t].contenido||" "==e[t].contenido?console.log("elemento vacio"):JAygyvzSWO(!1,o),improveBotLimpiarBurbuja()}break;case"btnLiveChat":console.log("BOTON DE LIVE CHAT");for(let t in e)console.log(e[t]),improvebotLiveChatButton(e[t].contenido);break;case"connectFaq":for await(let t of e)if(console.log(t.tipo),"file"==t.tipo){improveBotDeactivateInput(),(o=document.createElement("div")).style.display="flex",console.log("DESACTIVAR INPUT"),console.log("FILE");t.sub_faq>0?t.sub_faq:t.faq;(n=document.createElement("input")).setAttribute("type","file"),n.setAttribute("id","file_"+t.id),n.setAttribute("accept","image/*,application/pdf"),n.style.borderRadius="5px",n.style.border="0.12px solid #00000057",n.style.boxShadow="0px 3px 6px 0px rgba(0,0,0,0.55)",document.getElementById("improvebot_footerPrincipal").style.display="none",(i=document.createElement("button")).innerHTML="Env√≠ar",i.style.boxShadow="0px 4px 6px 0px rgba(0,0,0,0.55)",i.style.color="white",i.style.backgroundColor=gTBrmIzuvr.color,i.style.marginLeft="5%",i.style.textAlign="center",i.setAttribute("id","improveBot_btnsendName"),i.addEventListener("click",function(e){e.preventDefault(),console.log("Enviar"),console.log(n.files[0]);var o=n.files[0];console.log(n.files[0].name),console.log(n.files[0].size);const a=n.files[0].name,r=a.lastIndexOf("."),l=a.substring(0,r),s=a.substring(r+1);console.log(l),console.log(s);let c=getBase64(o).then(e=>{console.log(e);const o=t.sub_faq>0?t.sub_faq:t.faq;improvebot_FAQActual=o,i.style.display="none","pdf"==s?improvebotPetition("get_ans",{faq:o,bot:gTBrmIzuvr.id,chat:HAdmOsSMIr(),setence:n.files[0].name,url:window.location.origin,id_cliente:gTBrmIzuvr.id_fk_cliente,base64_:e,mimeType:n.files[0].type,extensionArchivo:s}).then(e=>{improveBotLimpiarBurbuja(),JAygyvzSWO(!0,"Archivo enviado: "+a,"yes");for(let t in e.elementos)console.log(e.elementos[t]),ozRadApFvB(e.elementos[t],t);document.getElementById("improve_buttons").innerHTML=""}).catch(e=>{console.error(e)}):improvebotPetition("get_ans",{faq:o,bot:gTBrmIzuvr.id,chat:HAdmOsSMIr(),setence:n.files[0].name,url:window.location.origin,id_cliente:gTBrmIzuvr.id_fk_cliente,base64_:e,mimeType:"application/image",extensionArchivo:s}).then(e=>{improveBotLimpiarBurbuja(),JAygyvzSWO(!0,"Archivo enviado: "+a,"yes");for(let t in e.elementos)console.log(e.elementos[t]),ozRadApFvB(e.elementos[t],t);document.getElementById("improve_buttons").innerHTML=""}).catch(e=>{console.error(e)}),console.log(c)});improvebot_cantidadBotones=0,improvebot_limpiarBotones()}),o.append(n),o.append(i),JAygyvzSWO(!1,o)}else if("foto"==t.tipo){improveBotDeactivateInput(),(o=document.createElement("div")).style.display="flex",console.log("DESACTIVAR INPUT"),console.log("FOTO");t.sub_faq>0?t.sub_faq:t.faq;(n=document.createElement("input")).setAttribute("type","file"),n.setAttribute("id","file_"+t.id),n.setAttribute("accept","image/*"),n.style.borderRadius="5px",n.style.border="0.12px solid #00000057",n.style.boxShadow="0px 3px 6px 0px rgba(0,0,0,0.55)",document.getElementById("improvebot_footerPrincipal").style.display="none",(i=document.createElement("button")).innerHTML="Env√≠ar",i.style.boxShadow="0px 4px 6px 0px rgba(0,0,0,0.55)",i.style.color="white",i.style.backgroundColor=gTBrmIzuvr.color,i.style.marginLeft="5%",i.style.textAlign="center",i.setAttribute("id","improveBot_btnsendName"),i.addEventListener("click",function(e){e.preventDefault(),console.log("Enviar"),console.log(n.files[0]);var o=n.files[0];console.log(n.files[0].name),console.log(n.files[0].size);const a=n.files[0].name,r=a.lastIndexOf("."),l=a.substring(0,r),s=a.substring(r+1);console.log(l),console.log(s);getBase64(o).then(e=>{console.log(e);const o=t.sub_faq>0?t.sub_faq:t.faq;improvebot_FAQActual=o,i.style.display="none","pdf"==s?improvebotPetition("get_ans",{faq:o,bot:gTBrmIzuvr.id,chat:HAdmOsSMIr(),setence:n.files[0].name,url:window.location.origin,id_cliente:gTBrmIzuvr.id_fk_cliente,base64_:e,mimeType:n.files[0].type,extensionArchivo:s}).then(e=>{improveBotLimpiarBurbuja(),JAygyvzSWO(!0,"Archivo enviado: "+a,"yes");for(let t in e.elementos)console.log(e.elementos[t]),ozRadApFvB(e.elementos[t],t);document.getElementById("improve_buttons").innerHTML=""}).catch(e=>{console.error(e)}):improvebotPetition("get_ans",{faq:o,bot:gTBrmIzuvr.id,chat:HAdmOsSMIr(),setence:n.files[0].name,url:window.location.origin,id_cliente:gTBrmIzuvr.id_fk_cliente,base64_:e,mimeType:"application/image",extensionArchivo:s}).then(e=>{improveBotLimpiarBurbuja(),JAygyvzSWO(!0,"Archivo enviado: "+a,"yes");for(let t in e.elementos)console.log(e.elementos[t]),ozRadApFvB(e.elementos[t],t);document.getElementById("improve_buttons").innerHTML=""}).catch(e=>{console.error(e)})});improvebot_cantidadBotones=0,improvebot_limpiarBotones()}),o.append(n),o.append(i),JAygyvzSWO(!1,o)}else if("pdf"==t.tipo){var o;improveBotDeactivateInput(),(o=document.createElement("div")).style.display="flex",console.log("DESACTIVAR INPUT"),console.log("FILE");t.sub_faq>0?t.sub_faq:t.faq;var n,i;(n=document.createElement("input")).setAttribute("type","file"),n.setAttribute("id","file_"+t.id),n.setAttribute("accept","application/pdf"),n.style.borderRadius="5px",n.style.border="0.12px solid #00000057",n.style.boxShadow="0px 3px 6px 0px rgba(0,0,0,0.55)",document.getElementById("improvebot_footerPrincipal").style.display="none",(i=document.createElement("button")).innerHTML="Env√≠ar",i.style.boxShadow="0px 4px 6px 0px rgba(0,0,0,0.55)",i.style.color="white",i.style.backgroundColor=gTBrmIzuvr.color,i.style.marginLeft="5%",i.style.textAlign="center",i.setAttribute("id","improveBot_btnsendName"),i.addEventListener("click",function(e){e.preventDefault(),console.log("Enviar"),console.log(n.files[0]);var o=n.files[0];console.log(n.files[0].name),console.log(n.files[0].size);const a=n.files[0].name,r=a.lastIndexOf("."),l=a.substring(0,r),s=a.substring(r+1);console.log(l),console.log(s);let c=getBase64(o).then(e=>{console.log(e);const o=t.sub_faq>0?t.sub_faq:t.faq;improvebot_FAQActual=o,console.log(c),i.style.display="none",improvebotPetition("get_ans",{faq:o,bot:gTBrmIzuvr.id,chat:HAdmOsSMIr(),setence:n.files[0].name,url:window.location.origin,id_cliente:gTBrmIzuvr.id_fk_cliente,base64_:e,mimeType:n.files[0].type,extensionArchivo:s}).then(e=>{improveBotLimpiarBurbuja(),JAygyvzSWO(!0,"Archivo enviado: "+a,"yes");for(let t in e.elementos)console.log(e.elementos[t]),ozRadApFvB(e.elementos[t],t);document.getElementById("improve_buttons").innerHTML=""}).catch(e=>{console.error(e)})});improvebot_cantidadBotones=0,improvebot_limpiarBotones()}),o.append(n),o.append(i),JAygyvzSWO(!1,o)}else{console.log("No es un archivo"),improveBotActivateInput();document.getElementById("improvebot_footerPrincipal").style.display="flex"}break;case"btnFaq":for await(let t of e){improveBotDeactivateInput();const e=e=>{e.preventDefault(),improvebot_cantidadBotones=0,improvebot_limpiarBotones();const o=t.sub_faq>0?t.sub_faq:t.faq;improvebot_FAQActual=o,improvebotPetition("get_ans",{faq:o,bot:gTBrmIzuvr.id,chat:HAdmOsSMIr(),setence:t.contenido,url:window.location.origin,id_cliente:gTBrmIzuvr.id_fk_cliente}).then(e=>{improveBotLimpiarBurbuja(),JAygyvzSWO(!0,t.contenido,"yes");for(let t in e.elementos)console.log(e.elementos[t]),ozRadApFvB(e.elementos[t],t);document.getElementById("improve_buttons").innerHTML=""}).catch(e=>{console.error(e)})};null==t.contenido||""==t.contenido||" "==t.contenido?console.log("elemento vacio"):gzTaKGCLli(t.contenido,e)}break;case"btnHref":{const t=function(t){t.preventDefault(),window.open(e.href,"_blank")};gzTaKGCLli(e.contenido,t);break}case"card":const _=t=>{t.preventDefault(),improvebot_limpiarCards(),improvebotPetition("get_faq",{faq:e.sub_faq>0?e.sub_faq:e.faq,bot:gTBrmIzuvr.id,chat:HAdmOsSMIr(),text:e.hijo,url:window.location.origin}).then(t=>{improveBotLimpiarBurbuja(),JAygyvzSWO(!0,e.hijo,"yes");var o=0;let n=0;t.elementos.length>0?t.elementos.forEach(e=>{if(console.log(e.tipo),"btnFaq"==e.tipo||"card"==e.tipo||"true"==e.read)++o,improveBotDeactivateInput(),ozRadApFvB(e);else{if(document.getElementById("improvebot_animaciontemporal"));else{let e=improvebotChatBubble();vktrUabOUS.append(e)}setTimeout(function(){if(document.getElementById("improvebot_animaciontemporal"))ozRadApFvB(e),improveBotLimpiarBurbuja();else{let t=improvebotChatBubble();vktrUabOUS.append(t),setTimeout(function(){ozRadApFvB(e),improveBotLimpiarBurbuja()},500)}},1e3+n)}o>0?improveBotDeactivateInput():0===o&&improveBotActivateInput(),n+=1e3}):JAygyvzSWO(!1,t.respuestas.replace(/"/g,""))}).catch(e=>{console.error(e)})};var a=document.createElement("img");a.src=EUEfixfCco+e.img;var r=document.createElement("div");a.style.width="100%",a.style.height="100%",a.style.borderTopRightRadius="5%",a.style.borderTopLeftRadius="5%";var l=document.createElement("h4"),s=document.createElement("a"),c=document.createElement("p");(b=document.createElement("button")).innerHTML="Seleccionar",b.style.width="100%",s.innerHTML=e.hijo,s.style.height="20%",c.style.height="70%",c.style.height="70%",s.style.fontSize="x-small",s.style.fontFamily="Poppins,sans-serif",c.innerHTML=e.contenido,b.style.backgroundColor=gTBrmIzuvr.color,b.addEventListener("click",_),a.addEventListener("click",function(t){t.preventDefault(),window.open(EUEfixfCco+e.img,"_blank")});var d=document.createElement("div");d.classList.add("product-price");var m=document.createElement("div");m.classList.add("product-bottom-details");var p=document.createElement("div");p.classList.add("product-details");var u=document.createElement("div");u.classList.add("product-tumb"),u.style.display="block",u.style.height="30%",u.style.padding="0%",p.style.display="block",p.style.height="70%",m.style.display="block",m.style.height="10%",d.style.width="100%",d.style.backgroundColor="100%",d.style.display="block";var v=document.createElement("div");v.classList.add("product-card"),l.append(s),p.append(l),p.append(c),p.append(m),m.append(d),d.append(b),u.append(a),v.append(u),v.append(p),v.style.width="70%",v.style.borderRadius="5%",p.style.marginTop="3%",improvebot_writecard_element(v);break;case"btnMenu":break;case"btnCalendly":var b;(b=document.createElement("button")).innerHTML="Click para agendar cita",b.addEventListener("click",function(t){ImproveBot_dibujarBotonCalendly(e.href)}),b.style.backgroundColor="transparent",JAygyvzSWO(!1,b);break;case"imgDiv":var g=document.getElementById("improvebot_listaPrincipal");for(let t in e){var y=document.createElement("img");y.setAttribute("class","improvebotIMG"),y.setAttribute("src",e[t].img),y.style.width="90%",y.style.height="auto",y.style.borderBottomLeftRadius="10%",y.style.borderBottomRightRadius="10%",y.style.borderTopRightRadius="10%",y.addEventListener("click",function(o){o.preventDefault(),window.open(e.href?e.href:e[t].img,"_blank")}),g.append(y),UzBKRiDTSK()}break;case"slctd":improveBotNameFlag=!0;break;case"EApi":var f=document.createElement("div"),B=document.createElement("form");improvebotPetition("get_formulario",{id_enpoint:e.contenido,url:window.location.origin}).then(t=>{improveBotLimpiarBurbuja(),t.forEach(t=>{B.id="formularioApi"+e.contenido,r=document.createElement("div");const o=document.createElement("label"),n=document.createElement("input");o.innerHTML=t.llave,n.placeholder=t.llave,n.name=t.llave,n.type=e.href,r.append(o),r.append(n),B.append(r)})});var h=document.createElement("button");h.type="submit",h.addEventListener("click",t=>{t.preventDefault();const o=new FormData;o.append("id_api",e.href),o.append("ruta",e.contenido);for(var n=document.getElementById(B.id),i=0;i<n.length;i++)o.append(n[i].name,n[i].value);improvebotSendApi("get_api_formulario",o).then(e=>{})}),h.innerHTML="enviar",f.append(B),f.append(h),JAygyvzSWO(!1,f)}}function getBase64(e){return new Promise((t,o)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=(()=>{let e=n.result.toString().replace(/^data:(.*,)?/,"");e.length%4>0&&(e+="=".repeat(4-e.length%4)),t(e)}),n.onerror=(e=>o(e))})}function ImproveBot_sendName(){var e=document.getElementById("improveBot_inputName");improvebotSendNameInputApi(e.value).then(e=>{}).catch(e=>{console.error(e)}),e.setAttribute("disabled",""),document.getElementById("improveBot_btnsendName").setAttribute("disabled",""),document.getElementById("improvebot_footerPrincipal").style.display="flex"}function ImproveBot_dibujarBotonCalendly(e){var t=document.createElement("div");t.style.height="100%",t.setAttribute("id","improvebot_diviframe");var o=document.createElement("button");o.type="button",o.setAttribute("id","improvebot_btnback"),o.innerText="Volver al chat";var n=document.createElement("iframe");n.setAttribute("class","calendly"),n.setAttribute("src",e),n.style.width="100%",n.style.height="85%";var i=document.getElementById("improvebot_contenedorPrincipal"),a=document.getElementById("improvebot_listaPrincipal"),r=document.getElementById("improvebot_footerPrincipal");document.getElementById("improvebot_poweredbyPrincipal").style.display="none",a.style.display="none",r.style.display="none",o.addEventListener("click",ImproveBot_ComeBackButton),o.style.padding="10px",o.style.margin="5px",o.style.color="#ffffff",o.style.backgroundColor=gTBrmIzuvr.color,o.style.boxShadow="0px 4px 6px 0px rgba(0,0,0,0.55)";var l=document.createElement("div");l.classList.add("poweredByKrino"),l.setAttribute("id","improvebot_poweredbySecundario");const s=document.createElement("img");s.src="https://static-for-flask-krino.s3.amazonaws.com/static/img/Logotipo+Krino-09.png",s.classList.add("poweredbyimprovebot");const c=document.createElement("button");c.classList.add("buttonKImproveBot"),c.style.display="inline-flex";const d=document.createElement("a");d.classList.add("poweredByKrinoAHref"),d.href="https://krino.ai/",d.target="_blank";const m=document.createElement("span");m.innerText="Power by Krino",m.classList.add("textImproveUsedBy"),m.style.marginTop="2%",m.style.verticalAlign="50% !important",m.style.marginLeft="5px",d.append(s),c.append(d),c.append(m),l.append(c),t.append(o),t.append(n),t.append(l),i.append(t)}function improvebot_limpiarCards(){const e=Array.prototype.slice.call(document.getElementsByClassName("splide__slide"),0);for(const t of e)t.remove();const t=Array.prototype.slice.call(document.getElementsByClassName("splide__pagination"),0);for(const e of t)e.remove();var o=document.getElementsByClassName("splide__arrow--next"),n=document.getElementsByClassName("splide__arrow--prev");o[0].style.boxSizing="border-box",n[0].style.boxSizing="border-box"}function improvebot_limpiarBotones(){const e=Array.prototype.slice.call(document.getElementsByClassName("SweWCzGWfE"),0);for(const t of e)t.remove();const t=Array.prototype.slice.call(document.getElementsByClassName("Buttons_improve"),0);for(const e of t)e.remove()}function improvebotChatBubble(){const e=document.createElement("li");e.setAttribute("id","improvebot_animaciontemporal");const t=document.createElement("div");t.classList.add("chat-bubble-improvebot-inchat");const o=document.createElement("div");o.classList.add("typing-improvebot");const n=document.createElement("div");n.classList.add("dot-improvebot");const i=document.createElement("div");i.classList.add("dot-improvebot");const a=document.createElement("div");return a.classList.add("dot-improvebot"),o.append(n),o.append(i),o.append(a),t.append(o),e.append(t),e}function improvebotElementsInit(){yKRsYXgiwS.append(divInicial),divInicial.classList.add("dnnoPQOJXG"),activarCDNCarousel(),"no"===gTBrmIzuvr.logo?divInicial.style.backgroundColor=gTBrmIzuvr.color:(divInicial.style.backgroundImage='url("'+gTBrmIzuvr.logo+'")',divInicial.style.backgroundPosition="center",divInicial.style.backgroundSize="contain",divInicial.style.borderRadius="42px",divInicial.style.backgroundRepeat="no-repeat");const e=document.createElement("div");e.classList.add("buble-chat-animation");const t=document.createElement("div");t.classList.add("point-rebotando1");const o=document.createElement("div");o.classList.add("point-rebotando2");const n=document.createElement("div");n.classList.add("point-rebotando3"),e.append(t),e.append(o),e.append(n);const i=document.createElement("i"),a=document.createElement("div");a.classList.add("TnoLYVvCEN"),a.setAttribute("id","improvebot_contenedorPrincipal");const r=document.createElement("div");r.classList.add("aGRohHbaqo"),r.setAttribute("id","improvebot_headerPrincipal"),r.style.background=gTBrmIzuvr.color;const l=document.createElement("div");l.classList.add("imagen-chatbotxtop"),l.style.backgroundImage="url("+("none_image"===gTBrmIzuvr.image?"https://krino.cl/img/improvebot/avatar.svg":gTBrmIzuvr.image)+")";const s=document.createElement("span");s.classList.add("KVwDOaSOKB"),s.innerHTML=gTBrmIzuvr.name_bot;const c=document.createElement("button");c.innerHTML="x",c.style.color=gTBrmIzuvr.color,r.append(l),r.append(s),r.append(c),(vktrUabOUS=document.createElement("ul")).classList.add("prbKppPRAs"),vktrUabOUS.setAttribute("id","improvebot_listaPrincipal"),vktrUabOUS.style.color=gTBrmIzuvr.color,(improvebot_ulcards=document.createElement("ul")).classList.add("splide__list"),improvebot_ulcards.setAttribute("id","improvebot_listaPrincipalCards"),improvebot_ulcards.style.color=gTBrmIzuvr.color;const d=document.createElement("div");d.classList.add("splide");const m=document.createElement("div");m.classList.add("splide__track"),m.append(improvebot_ulcards),d.append(m);const p=document.createElement("div");p.classList.add("EEzwrRIdxN"),p.setAttribute("id","improvebot_footerPrincipal"),(KRuQZYzyGZ=document.createElement("div")).classList.add("IUBdLFSJey"),KRuQZYzyGZ.contentEditable=!0,KRuQZYzyGZ.setAttribute("disabled",!0),KRuQZYzyGZ.style.border="2px solid "+gTBrmIzuvr.color,KRuQZYzyGZ.style.color=gTBrmIzuvr.color;const u=document.createElement("button");u.id="sendMessage",u.innerHTML="enviar",u.style.border="2px solid "+gTBrmIzuvr.color,u.style.color=gTBrmIzuvr.color;const v=document.createElement("div");v.id="improve_buttons";const b=document.createElement("div");b.classList.add("poweredByKrino"),b.setAttribute("id","improvebot_poweredbyPrincipal");const g=document.createElement("img");g.src="https://static-for-flask-krino.s3.amazonaws.com/static/img/Logotipo+Krino-09.png",g.classList.add("poweredbyimprovebot");const y=document.createElement("button");y.classList.add("buttonKImproveBot");const f=document.createElement("a");f.classList.add("poweredByKrinoAHref"),f.href="https://krino.ai/",f.target="_blank";const B=document.createElement("span");B.innerText="Power by Krino",B.classList.add("textImproveUsedBy"),B.style.marginTop="2%",B.style.verticalAlign="50% !important",B.style.marginLeft="5px",f.append(g),y.append(f),y.append(B),b.append(y),p.append(KRuQZYzyGZ),p.append(u),a.append(r),a.append(vktrUabOUS),a.append(p),a.append(v),a.append(d),a.append(b),divInicial.append(e),divInicial.append(i),divInicial.append(a),setTimeout(function(){improveBotCallToActionFlag&&ImproveBot_CalltoAction()},5e3)}function wCnJpMUejb(){window.sessionStorage.setItem("jHBpBbxbzB",jHBpBbxbzB)}function HAdmOsSMIr(){return window.sessionStorage.getItem("jHBpBbxbzB")}function ImproveBot_CalltoAction(){var e=document.createElement("button");e.setAttribute("id","divimprovebot_calltoaction"),e.style.display="block",e.style.position="absolute",e.style.width="15px",e.style.right="0px",e.style.bottom="60px",e.style.borderRadius="50%",e.style.backgroundColor="#4a4646f5";var t=document.createElement("a");t.style.color="#fff",t.style.fontFamily="Poppins, sans-serif",t.style.fontSize="8px",t.style.display="block",t.style.margin="15%",t.style.alignSelf="center",t.style.textAlign="center",t.innerHTML="X",e.style.borderStyle="hidden",e.append(t),e.addEventListener("click",function(){var e=document.getElementById("improvebot_calltoaction");e&&(e.style.display="none",document.getElementById("divimprovebot_calltoaction").style.display="none")});var o=document.createElement("div");o.style.display="block",o.style.position="absolute",o.style.width="100%",o.style.height="auto",o.style.bottom="80%",o.style.borderRadius="10px",o.style.backgroundColor="#ffffff",o.style.boxShadow="rgb(0 0 0 / 40%) 2px 3px 3px 1px",o.setAttribute("id","improvebot_calltoaction"),o.style.transition="top 2s",o.style.border="solid 0.5px",o.style.borderColor="grey",o.style.wordBreak="break-word";var n=document.createElement("a");n.style.display="block ",n.style.padding="4.3%",n.innerHTML=improvebot_textoinicio,n.style.color="#000",n.style.fontFamily="Poppins, sans-serif",n.style.fontSize="12px",n.style.alignSelf="center",n.style.textAlign="center",localStorage.setItem("Improve-callToActionTime",Date.now()),o.append(n);var i=document.createElement("div");i.append(o),i.append(e),i.setAttribute("id","divimprovebot_calltoaction_general"),i.style.position="fixed",i.style.right="100px",i.style.width="37%",i.style.bottom="82px",i.style.zIndex="98999898",yKRsYXgiwS.append(i)}function ImproveBot_ComeBackButton(){document.getElementById("improvebot_diviframe").remove();var e=document.getElementById("improvebot_listaPrincipal"),t=document.getElementById("improvebot_footerPrincipal");document.getElementById("improvebot_poweredbyPrincipal").style.display="block",e.style.display="block",t.style.display="flex"}function jdZEkhlBLR(){improveBotCallToActionFlag=!1,divInicial.removeAttribute("style");var e=document.getElementById("improvebot_calltoaction");e&&(e.style.display="none",document.getElementById("divimprovebot_calltoaction").style.display="none"),divInicial.getElementsByTagName("i")[0].hidden=!0,divInicial.classList.add("PBzfSIFWlv"),divInicial.getElementsByClassName("TnoLYVvCEN")[0].classList.add("RTShwqPmbn"),KRuQZYzyGZ.addEventListener("keydown",YURsNnADbt),KRuQZYzyGZ.attributes.disabled.value=!1,KRuQZYzyGZ.focus(),divInicial.removeEventListener("click",jdZEkhlBLR),divInicial.querySelector(".aGRohHbaqo button").addEventListener("click",AkcqasBZht),document.getElementById("sendMessage").addEventListener("click",SPQpZDaumm),vktrUabOUS.scrollTop=vktrUabOUS.scrollHeight,improvebot_iniciado||(jHBpBbxbzB=HAdmOsSMIr(),console.log({bot:gTBrmIzuvr.id,ip:direccionIP,browser:navigator.userAgent,url:window.location.origin,senderId:"",sid_id:""}),improvebotPetition("make_chat",{bot:gTBrmIzuvr.id,ip:direccionIP,browser:navigator.userAgent,url:window.location.origin,senderId:"",sid_id:""}).then(e=>{jHBpBbxbzB=parseInt(e.id),console.log("El id del registro de respuesta es: "+jHBpBbxbzB),wCnJpMUejb()}).catch(e=>console.error(e)),layRMXrLNe()),improvebot_iniciado=!0}function improvebotLiveChatFlagInitSocketFunction(){0==improvebotLiveChatFlagInitSocket&&((socket=io.connect("https://socket-improve.krino.ai/")).on("connect",()=>{socket.emit("identificacion",{idchat:jHBpBbxbzB})}),socket.on("mensaje-personal",function(e){var t=JSON.stringify(e);"exit"==(t=JSON.parse(t)).tipo?(vktrUabOUS.insertAdjacentHTML("beforeend",'<li class="amOArAVraw" style="border: 2px solid #ccc;background-color: #c5a6e070;display: flex;padding: 1px;margin-right: 1%;min-width: 101%;/* wid;width: 100%;;t-align: center; */justify-content: center;">Termin√≥ conversaci√≥n con ejecutivo</li>'),improvebotLiveChatFlag=!1,improvebotLiveChatFlagInitSocket=!1):"iframe"==t.tipo?JAygyvzSWO(!0,t.texto):JAygyvzSWO(!1,t.texto)}),improvebotLiveChatFlagInitSocket=!0)}function AkcqasBZht(){divInicial.classList.add("dnnoPQOJXG"),"no"===gTBrmIzuvr.logo?divInicial.style.backgroundColor=gTBrmIzuvr.color:(divInicial.style.backgroundImage='url("'+gTBrmIzuvr.logo+'")',divInicial.style.backgroundPosition="center",divInicial.style.backgroundSize="contain",divInicial.style.borderRadius="42px",divInicial.style.backgroundRepeat="no-repeat"),yKRsYXgiwS.style.backgroundColor=gTBrmIzuvr.color,divInicial.getElementsByClassName("TnoLYVvCEN")[0].classList.remove("RTShwqPmbn"),divInicial.getElementsByClassName("TnoLYVvCEN")[0].classList.hidden=!0,divInicial.getElementsByTagName("i")[0].hidden=!1,divInicial.classList.remove("PBzfSIFWlv"),divInicial.querySelector(".aGRohHbaqo button").removeEventListener("click",AkcqasBZht),document.getElementById("sendMessage").removeEventListener("click",SPQpZDaumm),KRuQZYzyGZ.removeEventListener("keydown",YURsNnADbt),KRuQZYzyGZ.attributes.disabled.value=!0,KRuQZYzyGZ.blur(),setTimeout(function(){divInicial.getElementsByClassName("TnoLYVvCEN")[0].classList.remove("RTShwqPmbn"),divInicial.getElementsByClassName("TnoLYVvCEN")[0].hidden=!1,divInicial.addEventListener("click",jdZEkhlBLR)},500)}async function SPQpZDaumm(){var e=KRuQZYzyGZ.innerHTML.replace(/\<div\>|\<br.*?\>/gi,"\n").replace(/\<\/div\>/g,"").trim().replace(/\n/g,"<br>");if(e)if(improvebotHistorialFlag=!1,improvebotHistorial.push({bot_or_human:!1,message:e}),improvebot_limpiarBotones(),1==improvebotLiveChatFlag)1==improvebotLiveChatFlagInitSocket&&(document.getElementsByClassName("IUBdLFSJey").value="",socket.emit("mensaje-personal",{idchat:jHBpBbxbzB,texto:e,tipo:"iframe",fecha:(new Date).toLocaleString().replace(",","").replace(/:.. /," ")}));else{var t=document.getElementsByClassName("IUBdLFSJey");improvebotPetition("get_ans",{faq:improvebot_FAQActual,bot:gTBrmIzuvr.id,chat:HAdmOsSMIr(),setence:t[0].textContent,url:window.location.origin,id_cliente:gTBrmIzuvr.id_fk_cliente}).then(e=>{improveBotLimpiarBurbuja(),JAygyvzSWO(!0,t[0].textContent,"yes"),t[0].textContent="";for(let t in e.elementos)ozRadApFvB(e.elementos[t],t);document.getElementById("improve_buttons").innerHTML=""}).catch(e=>{console.error(e)})}}function JAygyvzSWO(e,t,o){const n=document.createElement("li");if(n.classList.add(e?"amOArAVraw":"WrdaMJNcVA"),n.style.border="2px solid "+gTBrmIzuvr.color,0==e&&improvebotSonido.play(),"string"==typeof t){var i=(t=NIcSfZYyDv(t)).includes("[JUMP_LINE]");i=t.replaceAll("[JUMP_LINE]","<br>"),n.innerHTML=i}else n.append(t);vktrUabOUS.append(n),UzBKRiDTSK()}var splide;function improvebot_writecard_element(e){const t=document.createElement("li");t.append(e),t.className="splide__slide";var o=document.getElementById("improvebot_listaPrincipalCards");if(document.getElementsByClassName("splide__slide").length>0){var n=document.getElementsByClassName("splide__arrow--next"),i=document.getElementsByClassName("splide__arrow--prev");n[0].style.boxSizing="content-box",i[0].style.boxSizing="content-box",i[0].style.marginLeft="11%",n[0].style.marginRight="11%",splide.add(t)}else o.append(t),splide=new Splide(".splide",{cover:!0,fixedHeight:"20rem",heightRatio:.5,type:"loop",focus:"center",padding:{right:"20%",left:"20%"}}).mount();var a=document.getElementById("improvebot_contenedorPrincipal"),r=document.getElementById("improvebot_poweredbyPrincipal");null!=r&&r.remove();let l=document.createElement("div");l.classList.add("poweredByKrino"),l.setAttribute("id","improvebot_poweredbyPrincipal");let s=document.createElement("img");s.src="https://static-for-flask-krino.s3.amazonaws.com/static/img/Logotipo+Krino-09.png",s.classList.add("poweredbyimprovebot");let c=document.createElement("button");c.classList.add("buttonKImproveBot");let d=document.createElement("a");d.classList.add("poweredByKrinoAHref"),d.href="https://krino.ai/",d.target="_blank";const m=document.createElement("span");m.innerText="Power by Krino",m.classList.add("textImproveUsedBy"),m.style.marginTop="2%",m.style.verticalAlign="50% !important",m.style.marginLeft="5px",d.append(s),c.append(d),c.append(m),l.append(c),a.append(l),UzBKRiDTSK()}function gzTaKGCLli(e,t){const o=document.createElement("button");o.style.backgroundColor=gTBrmIzuvr.color;const n=LmPgXDUjpk(gTBrmIzuvr.color);o.style.color=WuuUyRhAzc(n.r,n.g,n.b)?"#000000":"#FFFFFF",o.addEventListener("click",t),o.innerText=e;var i=document.getElementById("improve_buttons");if(console.log("Botones"),o.style.marginBottom="15px",o.style.height="30px",o.style.marginLeft="auto",o.style.marginRight="auto",o.style.minHeight="5%",o.className="Buttons_improve",console.log(improvebot_cantidadBotones),console.log("Contando"),improvebot_cantidadBotones>4)console.log("CAMBIANDING"),o.style.marginLeft="15px",o.style.marginRight="15px",o.style.display="initial";else{console.log("Estilo original");const e=document.querySelectorAll(".Buttons_improve");console.log(e)}i.append(o),UzBKRiDTSK()}function improvebot_deliveryGourmetAPI(){let e=window.localStorage.getItem("accessToken"),t=1;null==e||""==e?(console.log("token vacio"),t=0,e="vacio"):console.log("token no vacio"),fetch("https://api.deliverygourmet.cl/users/info",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.slice(1,-1),origin:"https://deliverygourmet.cl"}}).then(o=>{o.json().then(o=>{console.log(o),console.log("success");let n={key:"6FuUm3eE6LxKwGfigbCz5udQ2",id_chat:jHBpBbxbzB,token:e,logueado:t,nombreUsuario:o.name,apellidoUsuario:o.last_name};fetch("https://improvebot.krino.ai/7c7d5ad7ae222ce0aaa8067e50776751f5a55998b390255f0b3b303c06546962",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(e=>{console.log(e.status)}).catch(e=>{console.log(e)})})})}function improvebotCambiarEstadoALiveChat(){improvebot_limpiarBotones(),improvebot_cambiarEstadoBanderaLiveChat(!0),vktrUabOUS.insertAdjacentHTML("beforeend",'<li class="amOArAVraw" style="border: 2px solid #ccc;background-color: #c5a6e070;display: flex;padding: 1px;margin-right: 1%;min-width: 101%;/* wid;width: 100%;;t-align: center; */justify-content: center;">Iniciando conversaci√≥n con ejecutivo</li>'),fetch("https://improvebot.krino.ai/27388b86b2b9762839f54a43952e49c773304deba216e2fe8d65f66b82bf2d57",{method:"POST",body:JSON.stringify({id_chat:jHBpBbxbzB}),headers:{"Content-type":"application/json"}}).then(e=>e.json()),document.getElementById("improvebot_footerPrincipal").style.display="flex"}function improvebotLiveChatButton(e){const t=document.createElement("button");t.classList.add("SweWCzGWfE"),t.style.backgroundColor=gTBrmIzuvr.color;const o=LmPgXDUjpk(gTBrmIzuvr.color);t.style.color=WuuUyRhAzc(o.r,o.g,o.b)?"#000000":"#FFFFFF",t.addEventListener("click",improvebotCambiarEstadoALiveChat),t.innerText=e;var n=document.createElement("div");n.style.height="100%",n.setAttribute("id","improvebot_diviframe");var i=document.getElementById("improvebot_contenedorPrincipal");t.style.marginBottom="10px",t.style.height="5%",t.style.marginLeft="auto",t.style.marginRight="auto",i.append(t),UzBKRiDTSK()}function improvebotSendNameInputApi(e){return new Promise((t,o)=>{var n=new XMLHttpRequest;n.withCredentials=!1,n.addEventListener("readystatechange",function(){if(4===this.readyState)switch(this.status){case 200:t(JSON.parse(this.responseText));break;case 500:default:o(new Error("Error"))}}),n.open("POST",DChCJiXPDX),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.send(JSON.stringify({bot:gTBrmIzuvr.id,sentence:e,chat:jHBpBbxbzB,nombre:1}))})}function improvebotSendApi(e,t){return new Promise((o,n)=>{var i=new XMLHttpRequest;i.withCredentials=!1,i.addEventListener("readystatechange",function(){if(4===this.readyState)switch(this.status){case 200:o(JSON.parse(this.responseText));break;case 500:default:n(new Error("Error"))}}),i.open("POST",DChCJiXPDX+e),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.send(t)})}function UzBKRiDTSK(){setTimeout(()=>{KRuQZYzyGZ.innerHTML="",KRuQZYzyGZ.focus(),vktrUabOUS.scrollTop=vktrUabOUS.scrollHeight},250)}function YURsNnADbt(e){13===e.keyCode&&SPQpZDaumm()}function NIcSfZYyDv(e){var t=e.split(" ");return(t=t.map(e=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/gi.test(e)?'<a href="'+e+'" target="_blank">'+e+"</a>":e)).join(" ")}function TMWimaQXDx(){return new Promise((e,t)=>{var o=new XMLHttpRequest;o.withCredentials=!1,o.addEventListener("readystatechange",function(){if(4===this.readyState){const t=this.responseText.trim().split("\n"),o={};for(let e=0;e<t.length;e++){const n=t[e].split("=");o[n[0]]=n[1]}direccionIP=o.ip,e(o.ip)}}),o.open("GET","https://www.cloudflare.com/cdn-cgi/trace"),o.send()})}function improvebotPetition(e,t){return console.log(e,t),new Promise((o,n)=>{var i=new XMLHttpRequest;if(i.withCredentials=!1,i.addEventListener("readystatechange",function(){if(4===this.readyState)switch(this.status){case 200:o(JSON.parse(this.responseText));break;case 500:default:n(new Error("Error"))}}),t.sentence&&(JAygyvzSWO(!0,t.sentence),null==document.getElementById("improvebot_animaciontemporal"))){const e=improvebotChatBubble();vktrUabOUS.append(e)}"get_custom_chat"===e?i.open("GET",DChCJiXPDX+e):i.open("POST",DChCJiXPDX+e),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),console.log(JSON.stringify(t)),i.send(JSON.stringify(t))})}async function xQqkJkqaXi(){ngDblXlzko(await improvebotPetition("historial",{chat:jHBpBbxbzB,url:window.location.origin}))}function ngDblXlzko(e){if(e.length>0)if(gTBrmIzuvr.id===e[0].bot)e.shift();else{window.sessionStorage.removeItem("jHBpBbxbzB");const e=TMWimaQXDx();improvebotPetition("make_chat",{bot:gTBrmIzuvr.id,ip:e,browser:navigator.userAgent,url:window.location.origin,senderId:"",sid_id:""}).then(e=>{jHBpBbxbzB=parseInt(e),wCnJpMUejb()}).catch(e=>console.error(e))}}function LmPgXDUjpk(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function WuuUyRhAzc(e,t,o){return.2126*e+.7152*t+.0722*o<128}function improveBotLimpiarBurbuja(){if(null!=document.getElementById("improvebot_animaciontemporal")){const e=document.getElementById("improvebot_animaciontemporal");vktrUabOUS.removeChild(e)}}async function improveBotGetBot(e){return new Promise((t,o)=>{improvebotPetition("get_bot",{bot:e}).then(e=>{t(e)}).catch(e=>{o(e)})})}function improveBotActivateInput(){console.log("activate"),document.getElementById("improvebot_footerPrincipal").style.display="flex"}function improveBotDeactivateInput(){console.log("deactivate"),document.getElementById("improvebot_footerPrincipal").style.display="none"}divInicial.addEventListener("click",jdZEkhlBLR),improvebotInit();

    </script>

  </body>
</html>
